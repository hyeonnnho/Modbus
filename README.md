# Modbus
## 다빈소프트 면접 대비 핵심 기술 정리
- 이 문서는 다빈소프트 기술 면접 및 과제 테스트 준비를 위한 핵심 기술 3가지를 정리한 자료입니다.

#### 목차
1. Part 1: 회사의 주요 기술 분야
    - 감시제어 시스템 (SCADA)
    - 장비 제어 시스템
    - 보안 시스템

2. Part 2: 개발에 필요한 핵심 기술
    - TCP/IP 데이터 통신
    - 멀티태스크 프로그래밍
    - MODBUS 데이터 통신

3. Part 3: Python 코드 예제
    - TCP/IP 통신 예제
    - 멀티태스크 프로그래밍 예제
    - MODBUS 통신 예제

### Part 1: 회사의 주요 기술 분야
- 다빈소프트의 핵심 직무는 산업 현장의 시스템을 IT 기술로 통합 제어하고 관리하는 것입니다.

1. 감시제어 시스템 (SCADA)
- **SCADA (Supervisory Control And Data Acquisition)** 는 공장이나 플랜트 전체를 한눈에 모니터링하고 원격으로 제어하는 **종합 관제 시스템**입니다.

- 주요 구성 요소:
    - HMI (Human-Machine Interface): 운영자가 시스템 상태를 보고 제어 명령을 내리는 시각화 화면.
    - MTU (Master Terminal Unit) / SCADA 서버: 시스템의 두뇌. 모든 데이터를 수집, 처리, 저장하고 명령을 전달하는 중앙 컴퓨터.
    - RTU & PLC: 현장의 센서와 장비에 직접 연결되어 데이터를 수집하고 제어 신호를 실행하는 현장 장치.
    - 통신 네트워크: 위의 모든 요소를 연결하는 신경망.

- 데이터 흐름:
`센서 → RTU/PLC → 네트워크 → 서버 → HMI → 운영자 → HMI → 서버 → RTU/PLC → 장비 동작`

2. 장비 제어 시스템
- SCADA가 '지휘 본부'라면, 장비 제어 시스템은 개별 장비(로봇, 컨베이어 벨트 등)에 탑재된 **소규모 두뇌**입니다. SCADA의 명령을 받아 실제 하드웨어를 구동하고, 장비의 상태를 SCADA로 보고합니다.

3. 보안 시스템
- 산업 시스템을 외부 위협으로부터 보호하는 '방화벽' 및 '보안 관제' 시스템입니다. 사무용 인터넷망(IT)과 공장 설비망(OT)을 분리하여 외부 해킹으로부터 내부 시스템을 보호하는 것이 핵심입니다.

### Part 2: 개발에 필요한 핵심 기술
- 위 시스템들을 실제로 구현하기 위한 핵심 프로그래밍 기술입니다.

1. TCP/IP 데이터 통신
- 컴퓨터와 장비 간의 **신뢰성 있는 데이터 통신**을 위한 인터넷 표준 프로토콜입니다.

- 핵심 원리:
    - 3-Way Handshake: 통신 시작 전, 3번의 신호를 주고받아 연결을 확립합니다.
    - 데이터 분할/순서 보장: 데이터를 작은 조각(패킷)으로 나누고 순서 번호를 붙여 전송 후, 수신 측에서 재조립합니다.
    - 수신 확인 (ACK): 데이터 수신 후 잘 받았다는 응답을 보내고, 응답이 없으면 재전송하여 데이터 유실을 방지합니다.

- 소켓(Socket) & 포트(Port):
    - IP 주소가 '건물 주소'라면, 포트 번호는 '호수'입니다.
    - 소켓은 'IP주소 + 포트번호'로 구성된, 프로그램이 데이터를 주고받는 실제적인 **통신 창구**입니다.

2. 멀티태스크 프로그래밍
- 하나의 프로그램이 **동시에 여러 작업**을 처리하는 기술입니다. SCADA 서버가 수백 개의 장비와 동시에 통신해야 할 때 필수적입니다.

- 주요 개념:
    - 프로세스(Process): 독립된 메모리 공간을 가진 실행 중인 프로그램.
    - 스레드(Thread): 프로세스 내에서 메모리를 공유하며 실행되는 더 작은 작업 단위. 여러 클라이언트의 요청을 동시에 처리하는 데 주로 사용됩니다.

3. MODBUS 데이터 통신
- 산업 현장 장비들 사이에서 사용되는 간단하고 효율적인 **표준 통신 규약(프로토콜)**입니다.

- 핵심 구조:
    - 마스터-슬레이브(Master-Slave): 1명의 '마스터'(주로 SCADA PC)가 여러 '슬레이브'(현장 장비)에게 명령을 내리고 응답을 받는 단순한 구조입니다.

- 동작 방식:
    - 마스터가 슬레이브에게 "데이터를 읽어라" 또는 "데이터를 써라" 같은 정해진 형식(Function Code)의 명령을 보내고, 슬레이브는 그 결과를 응답합니다.

### Part 3: Python 코드 예제
1. TCP/IP 통신 예제
- [서버](./server.py), [클라이언트](./client.py)
- 기본적인 서버-클라이언트 통신 구조입니다.

2. 멀티태스크 프로그래밍 예제
- [코드](./multi_threaded_server.py)
- 여러 클라이언트의 접속을 동시에 처리하기 위해 스레드를 활용하는 서버입니다.

3. MODBUS 통신 예제
- [코드](./modbus_master.py)
- pymodbus 라이브러리를 사용하여 마스터가 슬레이브 장비의 데이터를 읽고 쓰는 예제입니다.
